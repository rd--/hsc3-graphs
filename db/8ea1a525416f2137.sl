/* Fm7 ; an algorithmically generated graph courtesy f0 ; note one-indexing */
let xMatrix = [
	[
		[0.0, -1 / 3, -1.0, 0.0],
		[0.75, 0.75, 0.0, -0.5],
		[-0.5, -0.25, 0.25, -0.75],
		[-0.5, 1.0, 1.0, 1.0],
		[0.0, 1 / 6, -0.75, -1.0],
		[0.5, 0.5, -0.5, 1 / 3]
	],
	[
		[-1 / 3, 0.5, -0.5, -0.5],
		[0.5, 0.75, 0.25, 0.75],
		[-15 / 18, 0.25, -1.0, 0.5],
		[1.5, 0.25, 0.25, -0.25],
		[-2 / 3, -2 / 3, -1.0, -0.5],
		[-1.0, 0.0, -15 / 18, -1 / 3]
	],
	[
		[0.25, -0.5, -0.5, -1.0],
		[-0.5, 1.0, -1.5, 0.0],
		[-1.0, -1.5, -0.5, 0.0],
		[0.5, -1.0, 7 / 6, -0.5],
		[15 / 18, -0.75, -1.5, 0.5],
		[0.25, -1.0, 0.5, 1.0]
	],
	[
		[1.0, 1 / 3, 0.0, -0.75],
		[-0.25, 0.0, 0.0, -0.5],
		[-0.5, -0.5, 0.0, 0.5],
		[1.0, 0.75, 0.5, 0.5],
		[0.0, 1.5, -0.5, 0.0],
		[1.0, 0.0, -0.25, -0.5]
	],
	[
		[0.5, -0.25, 0.0, 1 / 3],
		[0.25, -0.75, 1 / 3, -1.0],
		[-0.25, -0.5, 0.25, -7 / 6],
		[0.0, 0.25, 0.5, 1 / 6],
		[-1.0, -0.5, 15 / 18, -0.5],
		[15 / 18, -0.75, -0.5, 0.0]
	],
	[
		[0.0, -0.75, -1 / 6, 0.0],
		[1.0, 0.5, 0.5, 0.0],
		[-0.5, 0.0, -0.5, 0.0],
		[-0.5, -1 / 6, 0.0, 0.5],
		[-0.25, 1 / 6, -0.75, 0.25],
		[-7 / 6, -4 / 3, -1 / 6, 1.5]
	]
];
let yMatrix = [
	[
		[0.0, -0.5, 1.0, 0.0],
		[-0.5, 1.0, 0.5, -0.5],
		[0.0, 1 / 3, 1.0, 1.0]
	],
	[
		[-0.5, 0.5, 1.0, 1.0],
		[0.0, 1 / 3, 0.0, 1.5],
		[-0.5, 15 / 18, 1.0, 0.0]
	],
	[
		[0.25, -2 / 3, 0.25, 0.0],
		[0.5, -0.5, -0.5, -0.5],
		[0.5, -0.5, -0.75, 15 / 18]
	],
	[
		[-0.25, 1.0, 0.0, 1 / 3],
		[-1.25, -0.25, 0.5, 0.0],
		[0.0, -1.25, -0.25, -0.5]
	],
	[
		[0.75, -0.25, 1.5, 0.0],
		[0.25, -1.5, 0.5, 0.5],
		[-0.5, -0.5, -0.5, -0.25]
	],
	[
		[0.0, 0.5, -0.5, 0.25],
		[0.25, 0.5, -1 / 3, 0.0],
		[1.0, 0.5, -1 / 6, 0.5]
	]
];
let ctlMatrix = xMatrix.collect { :p | p.collect { :q | SinOsc(q[1], q[2]) * q[3] + q[4] } };
let modMatrix = yMatrix.collect { :p | p.collect { :q | Pulse(q[1], q[2]) * q[3] + q[4] } };
let o = Fm7Matrix(ctlMatrix, modMatrix);
let g3 = LinLin(LfSaw(0.1, 0), -1, 1, 0, -12.DbAmp);
let g6 = -3.DbAmp;
[o[1] + (o[3] * g3) + o[5], o[2] + o[4] + o[6] * g6]
